{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{retrieve}from\"../Encryption\";import'semantic-ui-css/semantic.min.css';import ProfileImage from\"./ProfileImage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilePage=_ref=>{let{fetchBlogPosts}=_ref;const navigate=useNavigate();const[currentUser,setcurrentUser]=useState(null);const[blogs,setBlogs]=useState([]);useEffect(()=>{const user=retrieve();if(user){setcurrentUser(user);}else{setcurrentUser(null);}fetch(\"/blogs\").then(resp=>resp.json()).then(blogs=>{console.log(blogs);setBlogs(blogs.filter(blog=>blog.user_id===user.user_id)||[]);// fetchBlogPosts()\n}).catch(error=>{console.log(\"error fetching data\",error);});},[]);function deletePost(myId){const newBlogs=blogs.filter(blog=>blog.id!==myId);fetch(\"/blogs/\".concat(myId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+retrieve().access_token}}).then(()=>{setBlogs(newBlogs);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"ui grid\",style:{marginTop:'20px'},children:[currentUser?/*#__PURE__*/_jsx(\"div\",{className:\"five wide column\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui centered card\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"ui small circular image\",children:/*#__PURE__*/_jsx(\"img\",{src:currentUser.profile_image,alt:\"\"})}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",currentUser.username,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",currentUser.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Full Name: \",currentUser.firstname,\" \",currentUser.lastname]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",currentUser.email]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"ui teal button\",style:{marginTop:'20px',marginBottom:'20px'},onClick:()=>navigate('/update_user'),children:\"Update User Details\"})})]})}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"ten wide column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"ui fluid card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"ui center aligned header\",children:\"Your Blogs:\"}),blogs.length>=1?blogs===null||blogs===void 0?void 0:blogs.map(blog=>/*#__PURE__*/_jsx(\"div\",{className:\"ui centered card\",style:{width:'900px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:blog===null||blog===void 0?void 0:blog.images.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{className:\"ui small centered image\",src:image.file_path,alt:\"\".concat(index+1)},index))}),/*#__PURE__*/_jsx(\"h4\",{children:blog.title}),/*#__PURE__*/_jsx(\"h6\",{children:blog.excerpt}),/*#__PURE__*/_jsx(\"p\",{children:blog.content}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Categories:\"}),/*#__PURE__*/_jsx(\"ul\",{children:blog===null||blog===void 0?void 0:blog.categories.map(category=>category.name).join(', ')})]}),/*#__PURE__*/_jsx(\"button\",{className:\"mini ui teal button\",onClick:()=>navigate(\"/update_blog/\".concat(blog.id)),children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{className:\"mini ui teal button\",onClick:()=>deletePost(blog.id),children:\"Delete\"})]})},blog.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No existing Blogs\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ui teal button\",onClick:()=>navigate(\"/add_post\"),children:\"Add a New Post\"})]})})})]});};export default ProfilePage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","retrieve","ProfileImage","jsx","_jsx","jsxs","_jsxs","ProfilePage","_ref","fetchBlogPosts","navigate","currentUser","setcurrentUser","blogs","setBlogs","user","fetch","then","resp","json","console","log","filter","blog","user_id","catch","error","deletePost","myId","newBlogs","id","concat","method","headers","access_token","className","style","marginTop","children","src","profile_image","alt","username","firstname","lastname","email","marginBottom","onClick","length","map","width","images","image","index","file_path","title","excerpt","content","categories","category","name","join"],"sources":["/home/angela/Development/code/flask/blog_app_project/client/src/components/ProfilePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {retrieve} from \"../Encryption\";\nimport 'semantic-ui-css/semantic.min.css';\nimport ProfileImage from \"./ProfileImage\";\n\nconst ProfilePage = ({fetchBlogPosts}) => {\n  const navigate = useNavigate();\n  const [currentUser, setcurrentUser] = useState(null);\n  const [blogs, setBlogs] = useState([]);\n\n  useEffect(() => {\n    const user = retrieve()\n    if (user) {\n      setcurrentUser(user);\n    } else {\n      setcurrentUser(null);\n    }\n\n    fetch(\"/blogs\")\n      .then((resp) => resp.json())\n      .then((blogs) => {\n        console.log(blogs);\n        setBlogs(\n          blogs.filter((blog) => blog.user_id === user.user_id) || []\n        );\n        // fetchBlogPosts()\n        \n      })\n      .catch((error) => {\n        console.log(\"error fetching data\", error);\n      });\n  }, []);\n\n  function deletePost(myId) {\n    const newBlogs = blogs.filter((blog)=>blog.id!==myId)\n    fetch(`/blogs/${myId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\":\"Bearer \"+ retrieve().access_token\n      },\n    }).then(()=>{\n     \n      setBlogs(newBlogs)\n     \n    \n   \n    })\n  }\n\n  return (\n    <div className=\"ui grid\" style={{ marginTop: '20px' }}>\n      {currentUser ? (\n        <div className=\"five wide column\">\n          <div className=\"ui centered card\">\n            <div>\n              <div className=\"ui small circular image\">\n                <img src={currentUser.profile_image} alt=\"\" />\n              </div>\n              <h2>Welcome, {currentUser.username}!</h2>\n             \n              <p>Username: {currentUser.username}</p>\n              <p>Full Name: {currentUser.firstname} {currentUser.lastname}</p>\n              <p>Email: {currentUser.email}</p>\n            </div>\n            \n            <div>\n              <button className=\"ui teal button\" style={{ marginTop: '20px',marginBottom:'20px' }}onClick={() => navigate('/update_user')}>\n                Update User Details\n              </button>\n            </div>\n          \n          </div>\n        </div>\n      ) : (\n        <div></div>\n      )}\n\n      <div className=\"ten wide column\">\n        <div className=\"ui fluid card\">\n          <div className=\"content\">\n        <h3 className=\"ui center aligned header\">Your Blogs:</h3>\n        {blogs.length >= 1 ? (\n          blogs?.map((blog) => (\n            <div className=\"ui centered card\" key={blog.id}  style={{ width: '900px' }}>\n              <div  className=\"content\">\n              <div className=\"image-container\">\n                {blog?.images.map((image, index) => (\n                  <img key={index} className=\"ui small centered image\" src={image.file_path} alt={`${index + 1}`} />\n                ))}\n                </div>\n              <h4>{blog.title}</h4>\n              <h6>{blog.excerpt}</h6>\n              <p>{blog.content}</p>\n              <div>\n                <p>Categories:</p>\n                <ul>\n                  {blog?.categories.map((category) => category.name).join(', ')}\n                </ul>\n              </div>\n\n             \n\n              <button className=\"mini ui teal button\" onClick={() => navigate(`/update_blog/${blog.id}`)}>\n                Update\n              </button>\n              <button  className=\"mini ui teal button\" onClick={() => deletePost(blog.id)}>Delete</button>\n              </div>\n            </div>\n          ))\n          \n        ) : (\n          <p>No existing Blogs</p>\n          \n        )}\n          <button className=\"ui teal button\" onClick={() => navigate(\"/add_post\")}>Add a New Post</button>\n      </div>\n      </div>\n\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilePage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}