{"ast":null,"code":"import React from'react';import{useFormik}from'formik';import*as yup from\"yup\";import{useState}from'react';import{Link}from'react-router-dom';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SignUp=_ref=>{let{setShowSignIn}=_ref;const navigate=useNavigate();const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const formSchema=yup.object().shape({username:yup.string().required(\"Must Enter a username\"),email:yup.string().email(\"invalid email\"),password:yup.string().required(\"Must Enter a Password\").min(8)});const formik=useFormik({initialValues:{username:\"\",firstname:\"\",lastname:\"\",email:\"\",password:\"\",confirmPassword:\"\"},validationSchema:formSchema,onSubmit:(values,_ref2)=>{let{resetForm}=_ref2;setLoading(true);setError(null);fetch(\"/check-email\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:{email:formik.values.email}}).then(resp=>resp.json()).then(data=>{if(data.exists){setLoading(false);setError(\"Email address already exists. Please choose a different one.\");}else{fetch('/register',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(values,null,2)}).then(res=>{setLoading(false);if(res.status===200){setShowSignIn(true);navigate('/signIn');}else{resetForm();setError(\"Error creating user. Please try again.\");}}).catch(error=>{setLoading(false);setError(\"Error creating user. Please try again.\");console.error(\"Error while signing up:\",error);});}}).catch(error=>{setLoading(false);setError(\"Error checking email. Please try again.\");console.error(\"Error checking email:\",error);});}});return/*#__PURE__*/_jsxs(\"div\",{className:\"ui centered card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Sign Up Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",name:\"username\",onChange:formik.handleChange,value:formik.values.username}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:formik.errors.username}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstname\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"firstname\",name:\"firstname\",onChange:formik.handleChange,value:formik.values.firstname}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:formik.errors.firstname}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastname\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"lastname\",name:\"lastname\",onChange:formik.handleChange,value:formik.values.lastname}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:formik.errors.lastname}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",onChange:formik.handleChange,value:formik.values.email}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:formik.errors.email}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",onChange:formik.handleChange,value:formik.values.password}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:formik.errors.password}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"confirmPassword\",name:\"confirmPassword\",type:\"password\",onChange:formik.handleChange,value:formik.values.confirmPassword}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:formik.errors.confirmPassword}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"mini ui teal button\",style:{marginBottom:\"30px\"},children:loading?\"Loading...\":\"Submit\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error})]}),/*#__PURE__*/_jsx(Link,{className:\"Back\",to:\"/\",children:\"Back to HomePage\"})]});};export default SignUp;","map":{"version":3,"names":["React","useFormik","yup","useState","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","SignUp","_ref","setShowSignIn","navigate","loading","setLoading","error","setError","formSchema","object","shape","username","string","required","email","password","min","formik","initialValues","firstname","lastname","confirmPassword","validationSchema","onSubmit","values","_ref2","resetForm","fetch","method","headers","body","then","resp","json","data","exists","JSON","stringify","res","status","catch","console","className","children","handleSubmit","htmlFor","id","name","onChange","handleChange","value","style","color","errors","type","disabled","marginBottom","to"],"sources":["/home/angela/Development/code/flask/blog_app_project/client/src/components/SignUp.js"],"sourcesContent":["import React from 'react'\nimport {useFormik} from 'formik'\nimport * as yup from \"yup\"\nimport { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useNavigate } from 'react-router-dom'\n\nconst SignUp = ({setShowSignIn}) => {\n    const navigate=useNavigate()\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n  \n    const formSchema = yup.object().shape({\n      username: yup.string().required(\"Must Enter a username\"),\n      email: yup.string().email(\"invalid email\"),\n      password: yup.string().required(\"Must Enter a Password\").min(8),\n    });\n  \n    const formik = useFormik({\n      initialValues: {\n        username: \"\",\n        firstname:\"\",\n        lastname:\"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword:\"\"\n      },\n  \n      validationSchema: formSchema,\n      onSubmit: (values, { resetForm }) => {\n        setLoading(true);\n        setError(null);\n  \n        fetch(`/check-email`,{method:\"POST\", headers:{\"Content-Type\":\"application/json\"}\n      ,body:{email:formik.values.email}})\n          .then((resp) => resp.json())\n          .then((data) => {\n            if (data.exists) {\n              setLoading(false);\n              setError(\"Email address already exists. Please choose a different one.\");\n            } else {\n              fetch('/register', {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify(values, null, 2),\n              })\n                .then((res) => {\n                  setLoading(false);\n                  if (res.status === 200) {\n                    setShowSignIn(true)\n                    \n                    navigate('/signIn')\n\n                  } else {\n                    resetForm()\n                    setError(\"Error creating user. Please try again.\");\n                    \n                  }\n                })\n                .catch((error) => {\n                  setLoading(false);\n                  setError(\"Error creating user. Please try again.\");\n                  console.error(\"Error while signing up:\", error);\n                });\n            }\n          })\n          .catch((error) => {\n            setLoading(false);\n            setError(\"Error checking email. Please try again.\");\n            console.error(\"Error checking email:\", error);\n          });\n      },\n    });\n  \n    return (\n      <div className='ui centered card'>\n        <h1>User Sign Up Form</h1>\n        <form onSubmit={formik.handleSubmit}>\n          <label htmlFor='username'>Username</label>\n          <br />\n          <input id='username' name='username' onChange={formik.handleChange} value={formik.values.username} />\n          <p style={{ color: \"red\" }}>{formik.errors.username}</p>\n\n\n          <label htmlFor='firstname'>First Name</label>\n          <br />\n          <input id='firstname' name='firstname' onChange={formik.handleChange} value={formik.values.firstname} />\n          <p style={{ color: \"red\" }}>{formik.errors.firstname}</p>\n\n          <label htmlFor='lastname'>Last Name</label>\n          <br />\n          <input id='lastname' name='lastname' onChange={formik.handleChange} value={formik.values.lastname} />\n          <p style={{ color: \"red\" }}>{formik.errors.lastname}</p>\n\n\n\n          \n  \n          <label htmlFor='email'>Email</label>\n          <br />\n          <input id='email' name='email' onChange={formik.handleChange} value={formik.values.email} />\n          <p style={{ color: \"red\" }}>{formik.errors.email}</p>\n  \n          <label htmlFor='password'>Password</label>\n          <br />\n          <input id='password' name='password' type='password' onChange={formik.handleChange} value={formik.values.password} />\n          <p style={{ color: \"red\" }}>{formik.errors.password}</p>\n\n          <label htmlFor='confirmPassword'>Confirm Password</label>\n          <br />\n          <input id='confirmPassword' name='confirmPassword' type='password' onChange={formik.handleChange} value={formik.values.confirmPassword} />\n          <p style={{ color: \"red\" }}>{formik.errors.confirmPassword}</p>\n  \n          <button type=\"submit\" disabled={loading} className=\"mini ui teal button\" style={{marginBottom:\"30px\" }}>\n            {loading ? \"Loading...\" : \"Submit\"}\n          </button>\n  \n          {error && <p style={{ color: \"red\" }}>{error}</p>}\n        </form>\n\n        <Link className='Back' to='/'>Back to HomePage</Link>\n      </div>\n    );\n  };\n  \n  export default SignUp;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}