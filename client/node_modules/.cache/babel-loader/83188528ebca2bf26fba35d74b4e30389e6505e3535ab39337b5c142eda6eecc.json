{"ast":null,"code":"import React,{useState}from'react';import{useFormik}from'formik';import*as yup from'yup';import{Link}from'react-router-dom';import{useNavigate}from'react-router-dom';import ProfilePage from'./ProfilePage';import{store,retrieve}from\"../Encryption\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SignIn=_ref=>{let{setShowProfilePage,setUser,user,showProfilePage,blogPosts,setIsLoggedIn}=_ref;const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const navigate=useNavigate();const formSchema=yup.object().shape({username:yup.string().required('Must Enter a username'),password:yup.string().required('Must Enter a Password').min(8)});const formik=useFormik({initialValues:{username:'',password:''},validationSchema:formSchema,onSubmit:(values,_ref2)=>{let{resetForm}=_ref2;setLoading(true);setError(null);fetch(\"/login\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(values,null,2)}).then(loginResponse=>{if(loginResponse.status===200){return loginResponse.json();}else{throw new Error('Invalid username or password.');}}).then(data=>{console.log(data);store(data);setIsLoggedIn(true);navigate('/profile_page');}).catch(error=>{setLoading(false);setError('Error logging in. Please try again.');console.error('Error while signing in:',error);});}});return/*#__PURE__*/_jsxs(\"div\",{className:\"ui centered card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Sign In Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"ui input focus\",id:\"username\",name:\"username\",onChange:formik.handleChange,value:formik.values.username}),/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:formik.errors.username}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"ui input focus\",id:\"password\",name:\"password\",type:\"password\",onChange:formik.handleChange,value:formik.values.password}),/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:formik.errors.password}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"mini ui teal button\",style:{marginBottom:\"30px\"},children:loading?'Loading...':'Submit'}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error})]}),/*#__PURE__*/_jsx(Link,{className:\"Back\",to:\"/\",children:\"Back to HomePage\"}),showProfilePage&&/*#__PURE__*/_jsx(ProfilePage,{blogPosts:blogPosts})]});};export default SignIn;","map":{"version":3,"names":["React","useState","useFormik","yup","Link","useNavigate","ProfilePage","store","retrieve","jsx","_jsx","jsxs","_jsxs","SignIn","_ref","setShowProfilePage","setUser","user","showProfilePage","blogPosts","setIsLoggedIn","loading","setLoading","error","setError","navigate","formSchema","object","shape","username","string","required","password","min","formik","initialValues","validationSchema","onSubmit","values","_ref2","resetForm","fetch","method","headers","body","JSON","stringify","then","loginResponse","status","json","Error","data","console","log","catch","className","children","handleSubmit","htmlFor","id","name","onChange","handleChange","value","style","color","errors","type","disabled","marginBottom","to"],"sources":["/home/angela/Development/code/flask/blog_app_project/client/src/components/SignIn.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport { Link } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport ProfilePage from './ProfilePage';\nimport {store,retrieve} from \"../Encryption\"\n\nconst SignIn = ({ setShowProfilePage, setUser, user, showProfilePage, blogPosts, setIsLoggedIn }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  const formSchema = yup.object().shape({\n    username: yup.string().required('Must Enter a username'),\n    password: yup.string().required('Must Enter a Password').min(8),\n  });\n  \n  const formik = useFormik({\n    initialValues: {\n      username: '',\n      password: '',\n    },\n\n    validationSchema: formSchema,\n    onSubmit: (values, { resetForm }) => {\n      setLoading(true);\n      setError(null);\n\n      fetch(`/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(values, null, 2),\n      })\n        .then((loginResponse) => {\n          if (loginResponse.status === 200) {\n           return loginResponse.json()\n          } else {\n            throw new Error('Invalid username or password.');\n          }\n        })\n        .then((data)=>{\n          console.log(data)\n          store(data)\n        \n          setIsLoggedIn(true)\n          navigate('/profile_page')\n        })\n          .catch((error) => {\n          setLoading(false);\n          setError('Error logging in. Please try again.');\n          console.error('Error while signing in:', error);\n        });\n    },\n  });\n\n  return (\n    <div className=\"ui centered card\">\n      <h1>User Sign In Form</h1>\n      <form onSubmit={formik.handleSubmit}>\n        <label htmlFor=\"username\">Username</label>\n        <br />\n        <input className=\"ui input focus\" id=\"username\" name=\"username\" onChange={formik.handleChange} value={formik.values.username} />\n        <p style={{ color: 'red' }}>{formik.errors.username}</p>\n\n        <label htmlFor=\"password\">Password</label>\n        <br />\n        <input\n          className=\"ui input focus\"\n          id=\"password\"\n          name=\"password\"\n          type=\"password\"\n          onChange={formik.handleChange}\n          value={formik.values.password}\n        />\n        <p style={{ color: 'red' }}>{formik.errors.password}</p>\n\n        <button type=\"submit\" disabled={loading} className=\"mini ui teal button\" style={{marginBottom:\"30px\" }}>\n          {loading ? 'Loading...' : 'Submit'}\n        </button>\n\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n      </form>\n\n      <Link className=\"Back\" to=\"/\">\n        Back to HomePage\n      </Link>\n      {showProfilePage && <ProfilePage blogPosts={blogPosts} />}\n    </div>\n  );\n};\n\nexport default SignIn;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}