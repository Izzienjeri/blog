{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Route,Routes,useNavigate,Navigate}from\"react-router-dom\";import NavBar from\"./components/NavBar\";import MainPage from\"./components/MainPage\";import SignUp from\"./components/SignUp\";import SignIn from\"./components/SignIn\";import Footer from\"./components/Footer\";import\"./App.css\";import ProfilePage from\"./components/ProfilePage\";import SingleBlogPage from\"./components/SingleBlogPage\";import UpdatePost from\"./components/UpdatePost\";import AddPost from\"./components/AddPost\";import AddComment from\"./components/AddComment\";import CategoryPage from\"./components/CategoryPage\";import UpdateUser from\"./components/UpdateUser\";import{store,retrieve,remove}from\"../src/Encryption\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[blogPosts,setBlogPosts]=useState([]);const[showSignUp,setShowSignUp]=useState(false);const[showSignIn,setShowSignIn]=useState(false);const[showProfilePage,setShowProfilePage]=useState(false);const[user,setUser]=useState(null);const[post,setPost]=useState(null);const[comments,setComments]=useState(null);const[isLoggedIn,setIsLoggedIn]=useState(localStorage.getItem(\"jwt\")?true:false);const navigate=useNavigate();const fetchBlogPosts=()=>{fetch(\"/blogs\").then(resp=>resp.json()).then(blogs=>{setBlogPosts(blogs);}).catch(error=>{console.log(\"error fetching data\",error);});};useEffect(()=>{fetchBlogPosts();},[]);const handleSignUpClick=()=>{setShowSignUp(true);navigate(\"/register\");};const handleSignInClick=()=>{setShowSignIn(true);navigate(\"/signIn\",{replace:true});};const handleSignOutClick=()=>{fetch(\"/logout\",{headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+retrieve().access_token}}).then(()=>{remove();setIsLoggedIn(null);navigate(\"/\",{replace:true});}).catch(error=>{console.log(\"error logging out\",error);});};const handleClick=id=>{navigate(\"/blog_page/\".concat(id));};const handleComment=postData=>{fetch('/comments',{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+retrieve().access_token},body:JSON.stringify(postData)}).then(resp=>resp.json()).then(data=>{setComments(data);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(NavBar,{showSignUp:handleSignUpClick,showSignIn:handleSignInClick,showSignOut:handleSignOutClick,isLoggedIn:isLoggedIn}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MainPage,{blogPosts:blogPosts,setBlogPosts:setBlogPosts,handleClick:handleClick,fetchBlogPosts:fetchBlogPosts}),/*#__PURE__*/_jsx(Footer,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/\"}):/*#__PURE__*/_jsx(SignUp,{setShowSignIn:setShowSignIn})}),/*#__PURE__*/_jsx(Route,{path:\"/signIn\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/\"}):/*#__PURE__*/_jsx(SignIn,{setShowProfilePage:setShowProfilePage,showProfilePage:showProfilePage,setUser:setUser,user:user,blogPosts:blogPosts,setIsLoggedIn:setIsLoggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"/profile_page\",element:!isLoggedIn?/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/register\"}):/*#__PURE__*/_jsx(ProfilePage,{fetchBlogPosts:fetchBlogPosts})}),/*#__PURE__*/_jsx(Route,{path:\"/blog_page/:id\",element:/*#__PURE__*/_jsx(SingleBlogPage,{handleComment:handleComment})}),/*#__PURE__*/_jsx(Route,{path:\"/update_blog/:id\",element:/*#__PURE__*/_jsx(UpdatePost,{post:post})}),/*#__PURE__*/_jsx(Route,{path:\"/add_post\",element:/*#__PURE__*/_jsx(AddPost,{fetchBlogPosts:fetchBlogPosts,blogPosts:blogPosts,setBlogPosts:setBlogPosts})}),/*#__PURE__*/_jsx(Route,{path:\"/categories/:categoryName\",element:/*#__PURE__*/_jsx(CategoryPage,{handleClick:handleClick})}),/*#__PURE__*/_jsx(Route,{path:\"/comments\",element:/*#__PURE__*/_jsx(AddComment,{comments:comments,setComments:setComments,handleComment:handleComment})}),/*#__PURE__*/_jsx(Route,{path:\"/update_user\",element:/*#__PURE__*/_jsx(UpdateUser,{})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Route","Routes","useNavigate","Navigate","NavBar","MainPage","SignUp","SignIn","Footer","ProfilePage","SingleBlogPage","UpdatePost","AddPost","AddComment","CategoryPage","UpdateUser","store","retrieve","remove","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","blogPosts","setBlogPosts","showSignUp","setShowSignUp","showSignIn","setShowSignIn","showProfilePage","setShowProfilePage","user","setUser","post","setPost","comments","setComments","isLoggedIn","setIsLoggedIn","localStorage","getItem","navigate","fetchBlogPosts","fetch","then","resp","json","blogs","catch","error","console","log","handleSignUpClick","handleSignInClick","replace","handleSignOutClick","headers","access_token","handleClick","id","concat","handleComment","postData","method","body","JSON","stringify","data","className","children","showSignOut","path","element","to"],"sources":["/home/angela/Development/code/flask/blog_app_project/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Route, Routes, useNavigate, Navigate } from \"react-router-dom\";\nimport NavBar from \"./components/NavBar\";\nimport MainPage from \"./components/MainPage\";\nimport SignUp from \"./components/SignUp\";\nimport SignIn from \"./components/SignIn\";\nimport Footer from \"./components/Footer\";\nimport \"./App.css\";\nimport ProfilePage from \"./components/ProfilePage\";\nimport SingleBlogPage from \"./components/SingleBlogPage\";\nimport UpdatePost from \"./components/UpdatePost\";\nimport AddPost from \"./components/AddPost\";\nimport AddComment from \"./components/AddComment\"; \nimport CategoryPage from \"./components/CategoryPage\";\nimport UpdateUser from \"./components/UpdateUser\";\nimport {store,retrieve,remove} from \"../src/Encryption\";\n\nfunction App() {\n  const [blogPosts, setBlogPosts] = useState([]);\n  const [showSignUp, setShowSignUp] = useState(false);\n  const [showSignIn, setShowSignIn] = useState(false);\n  const [showProfilePage, setShowProfilePage] = useState(false);\n  const [user, setUser] = useState(null);\n  const [post, setPost] = useState(null);\n  const [comments,setComments]=useState(null);\n\n  const [isLoggedIn, setIsLoggedIn] = useState(\n    localStorage.getItem(\"jwt\") ? true : false\n  );\n  \n\n  const navigate = useNavigate();\n\n  const fetchBlogPosts = () => {\n    fetch(\"/blogs\")\n      .then((resp) => resp.json())\n      .then((blogs) => {\n        setBlogPosts(blogs);\n      })\n      .catch((error) => {\n        console.log(\"error fetching data\", error);\n      });\n  };\n\n  useEffect(() => {\n    fetchBlogPosts();\n  }, []);\n\n  const handleSignUpClick = () => {\n    setShowSignUp(true);\n    navigate(\"/register\");\n  };\n  const handleSignInClick = () => {\n    setShowSignIn(true);\n    navigate(\"/signIn\", { replace: true });\n  };\n  const handleSignOutClick = () => {\n    fetch(\"/logout\",{headers:{\n      \"Content-Type\":\"application/json\",\n      \"Authorization\": \"Bearer \" + retrieve().access_token,\n  }},)\n      .then(() => {\n        \n        remove()\n        setIsLoggedIn(null);\n        navigate(\"/\", { replace: true });\n      })\n      .catch((error) => {\n        console.log(\"error logging out\", error);\n      });\n  };\n  const handleClick = (id) => {\n    navigate(`/blog_page/${id}`);\n  };\n  const handleComment=(postData)=>{\n    fetch('/comments',{\n      method:\"POST\",\n      headers:{\n        \"Content-Type\":\"application/json\",\n        \"Authorization\": \"Bearer \" + retrieve().access_token,\n      },\n      body:JSON.stringify(postData)\n    })\n    .then((resp)=>resp.json())\n    .then((data)=>{\n      setComments(data)\n    })\n  }\n\n  return (\n    <div className=\"app\">\n      <NavBar\n        showSignUp={handleSignUpClick}\n        showSignIn={handleSignInClick}\n        showSignOut={handleSignOutClick}\n        isLoggedIn={isLoggedIn}\n      />\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <>\n              <MainPage\n                blogPosts={blogPosts}\n                setBlogPosts={setBlogPosts}\n                handleClick={handleClick}\n                fetchBlogPosts={fetchBlogPosts}\n              />\n              <Footer />\n            </>\n          }\n        />\n\n        <Route\n          path=\"/register\"\n          element={\n            isLoggedIn ? (\n              <Navigate replace to=\"/\" />\n            ) : (\n              <SignUp setShowSignIn={setShowSignIn} />\n            )\n          }\n        />\n\n        <Route\n          path=\"/signIn\"\n          element={\n            isLoggedIn ? (\n              <Navigate replace to=\"/\" />\n            ) : (\n              <SignIn\n                setShowProfilePage={setShowProfilePage}\n                showProfilePage={showProfilePage}\n                setUser={setUser}\n                user={user}\n                blogPosts={blogPosts}\n                setIsLoggedIn={setIsLoggedIn}\n              />\n            )\n          }\n        />\n        \n        <Route\n          path=\"/profile_page\"\n          element={\n            !isLoggedIn ? (\n              <Navigate replace to=\"/register\" />\n            ) : (\n              <ProfilePage fetchBlogPosts={fetchBlogPosts} />\n            )\n          }\n        />\n        <Route path=\"/blog_page/:id\" element={<SingleBlogPage handleComment={handleComment} />} />\n        <Route path=\"/update_blog/:id\" element={<UpdatePost post={post} />} />\n        <Route\n          path=\"/add_post\"\n          element={<AddPost fetchBlogPosts={fetchBlogPosts} blogPosts={blogPosts} setBlogPosts={setBlogPosts}/>}\n        />\n        <Route path=\"/categories/:categoryName\" element={<CategoryPage handleClick={handleClick}/>} />\n        <Route path='/comments' element={<AddComment comments={comments} setComments={setComments} handleComment={handleComment}/>}/>\n        <Route path='/update_user' element={<UpdateUser/>}/>\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}