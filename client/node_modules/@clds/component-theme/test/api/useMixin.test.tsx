import { renderHook } from '@testing-library/react-hooks';
import { assert } from 'chai';
import { stub } from 'sinon';
import * as styledComponents from 'styled-components';

import { createTheme, globalTheme, useMixin } from '../../src';

describe('useMixin', () => {
  it('should return theme value', () => {
    stub(styledComponents, 'useTheme').callsFake(() => ({
      palette: { primary: 'I am primary' },
      components: {},
    }));

    const theme = createTheme({
      very: {
        deep: {
          aNumber: 123,
          aString: 'hello',
          aBoolean: globalTheme.palette.primary,
        },
      },
    });

    const { result } = renderHook(() => useMixin(theme.very.deep.aBoolean));

    assert.strictEqual(result.current, 'I am primary');
  });
});
