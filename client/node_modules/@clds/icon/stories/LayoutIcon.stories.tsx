import type { Meta, StoryObj } from '@storybook/react';
import React from 'react';
import styled from 'styled-components';

import { blenderCss } from '@clds/blender';
import { globalTheme } from '@clds/component-theme';
import { Grid } from '@clds/dev-components';
import { typography } from '@clds/typography';

import { Transform, LayoutIcon } from '../src';

const meta: Meta<typeof LayoutIcon> = {
  title: 'Iconography/LayoutIcon',
  component: LayoutIcon,
  parameters: { layout: 'padded' },
};
export default meta;

type Story = StoryObj<typeof LayoutIcon>;

const GridWithColorContext = styled(Grid)`
  ${blenderCss.populateVariables};
  svg {
    background: ${globalTheme.palette.surface};
    box-sizing: border-box;
  }
`;

const Entry = styled.div`
  display: flex;
  align-items: center;
  gap: ${globalTheme.spacing.sm};
  background: ${globalTheme.palette.contrastLow};
  padding: ${globalTheme.spacing.sm};
  ${typography.md.contrastInvert};
`;

export const Primary: Story = {
  render: () => (
    <GridWithColorContext variant="primary" mode="plainSolid" intensity="md">
      <Grid.Tile>
        <Grid.Header>
          Industry standard size icons (experimental feature)
        </Grid.Header>
        <Grid.Paragraph>
          Icons marked as green are tweaked to fit industry standard icon
          dimensions, and at the same time to keep proper spacing alignment by
          using extra margins around them.
        </Grid.Paragraph>
        <Entry>
          <Transform size="xs" data-test-specifier="xs-icon" />
          xs icon
        </Entry>
        <Entry>
          <Transform size="sm" data-test-specifier="sm-icon" />
          sm icon
        </Entry>
        <Entry>
          <Transform size="md" data-test-specifier="md-icon" />
          md icon
        </Entry>
        <Entry>
          <LayoutIcon
            iconSize="18"
            iconComponent={Transform}
            color="success"
            data-test-specifier="size-18-icon"
          />
          18px LayoutIcon
        </Entry>
        <Entry>
          <Transform size="lg" data-test-specifier="lg-icon" />
          lg icon
        </Entry>
        <Entry>
          <LayoutIcon
            iconSize="24"
            iconComponent={Transform}
            color="success"
            data-test-specifier="size-24-icon"
          />
          24px LayoutIcon
        </Entry>
        <Entry>
          <Transform size="xl" data-test-specifier="xl-icon" />
          xl icon
        </Entry>
        <Entry>
          <LayoutIcon
            iconSize="36"
            iconComponent={Transform}
            color="success"
            data-test-specifier="size-36-icon"
          />
          36px LayoutIcon
        </Entry>
        <Entry>
          <Transform size="xxl" data-test-specifier="xxl-icon" />
          xxl icon
        </Entry>
        <Entry>
          <LayoutIcon
            iconSize="48"
            iconComponent={Transform}
            color="success"
            data-test-specifier="size-48-icon"
          />
          48px LayoutIcon
        </Entry>
      </Grid.Tile>
    </GridWithColorContext>
  ),
};
